<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width">
<title>Random Name Generator</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.0.0/normalize.css">
<style>
	
	*,
	*::before,
	*::after {
	-webkit-box-sizing: border-box;
	 -khtml-box-sizing: border-box;
	   -moz-box-sizing: border-box;
	    -ms-box-sizing: border-box;
	     -o-box-sizing: border-box;
	        box-sizing: border-box;
	}
	
	html,
	body { overflow: hidden; }
	html {
		font-size: 62.5%; /* Root font size of `10px`. */
		height: 100%;
	}
	body {
		/* `16px` base font size: */
		font: 400 1.6rem/1.4 "Ubuntu Mono", monospace, serif; /* Use `em` if you want the property to scale according to its font size and `rem` for everything else. */
		min-height: 100%;
		background: #69D2E7;
		padding: 1rem;
	}
	
	a,
	a:visited {
		color: black;
		text-decoration: none;
	}
	a:visited:hover,
	a:focus,
	a:focus:hover,
	a:hover,
	a:active {
		color: black;
		text-decoration: underline;
	}
	
	::-moz-selection {
		background: rgba(255, 255, 0, 0.55);
		text-shadow: none;
	}

	::selection {
		background: rgba(255, 255, 0, 0.55);
		text-shadow: none;
	}
	
	[number] {
		background: rgba(0, 0, 0, .75);
		opacity: 0;
		position: absolute;
		top: 0;
		right: 0;
		bottom: 0;
		left: 0;
		z-index: 1;
		pointer-events: none;
	}
	
	[number] > span {
		font-size: 20rem;
		color: #fff;
		text-shadow: 0 0 .5rem rgb(0, 0, 0),
		             0 0 1rem rgb(0, 0, 0);
	}
	
	[result] {
		font-size: 5rem;
		text-align: center;
		text-transform: capitalize;
		line-height: 1;
	}
	@media all and (max-width: 48em) {
		[result] { top: 30% !important; }
	}
	[result] a[whois] {
		font-size: 2rem;
		text-transform: lowercase;
		display: block;
		margin-top: 1rem;
	}
	
	[center] {
		position: absolute;
		top: 50%;
		left: 50%;
		-webkit-transform: translate(-50%, -50%);
		   -moz-transform: translate(-50%, -50%);
		    -ms-transform: translate(-50%, -50%);
		     -o-transform: translate(-50%, -50%);
		        transform: translate(-50%, -50%);
	}
	
	[fade] {
		opacity: 0;
		-webkit-transition: opacity 1s;
		   -moz-transition: opacity 1s;
		    -ms-transition: opacity 1s;
		     -o-transition: opacity 1s;
		        transition: opacity 1s;
	}
	[fade="visible"] {
		opacity: 1;
		-webkit-transition: opacity 1s;
		   -moz-transition: opacity 1s;
		    -ms-transition: opacity 1s;
		     -o-transition: opacity 1s;
		        transition: opacity 1s;
	}
	
	[history] {
		font-size: 2rem;
		text-align: center;
		line-height: 1;
		list-style-type: none;
	}
	@media all and (max-width: 48em) {
		[history] {
			top: 10% !important;
			-webkit-transform: translateX(-50%);
			   -moz-transform: translateX(-50%);
			    -ms-transform: translateX(-50%);
			     -o-transform: translateX(-50%);
			        transform: translateX(-50%);
		}
	}
	[history],
	[history] li {
		margin: 0;
		padding: 0;
	}
	[history] li { margin-bottom: 1rem; }
	[history] li:last-child { margin-bottom: 0; }
	
	[about] { pointer-events: none; }
	
	[off] {
		border: 0;
		clip: rect(0 0 0 0);
		height: 1px;
		margin: -1px;
		overflow: hidden;
		padding: 0;
		position: absolute;
		width: 1px;
	}
	
	p {
		font-size: 2rem;
		line-height: 1.2;
		text-align: center;
		background: #fff;
		width: 80%;
		margin: 0;
		padding: 1rem 1.5rem;
		border-radius: .5rem;
		position: absolute;
		bottom: 7rem;
		left: 50%;
		-webkit-transform: translateX(-50%);
		   -moz-transform: translateX(-50%);
		    -ms-transform: translateX(-50%);
		     -o-transform: translateX(-50%);
		        transform: translateX(-50%);
	}
	p b { font-size: 2.6rem; }
	
	@media all and (min-width: 48em) {
		p { width: auto; }
	}
	@media all and (max-width: 48em) {
		p br { display: none; }
	}
	
	[language] {
		font-size: 1.6rem;
		width: 100%;
		position: absolute;
		bottom: -3rem;
		left: 0;
	}
	[language]:focus { outline:none; }
	
	[unselectable] {
	-webkit-touch-callout: none;
	  -webkit-user-select: none;
	   -khtml-user-select: none;
	     -khtml-user-drag: none;
	     -moz-user-select: none;
	      -ms-user-select: none;
	          user-select: none;
	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
	-webkit-tap-highlight-color: transparent;
	outline-style: none;
	}
	[unselectable]::webkit-selection { background-color: transparent; }
	[unselectable]::-moz-selection { background-color: transparent; }
	[unselectable]::selection { background-color: transparent; }
	
</style>
</head>
<body>

<div about off unselectable>
	<span>Agency</span> Name Generator,
	<span>Animal</span> Name Generator,
	<span>Baby</span> Name Generator,
	<span>Band</span> Name Generator,
	<span>Blog</span> Name Generator,
	<span>Business</span> Name Generator,
	<span>Business</span> Name Generator,
	<span>Character</span> Name Generator,
	<span>Cool</span> Name Generator,
	<span>Domain</span> Name Generator,
	<span>Encyclopedia</span> Name Generator,
	<span>Fake</span> Name Generator,
	<span>Fantasy</span> Name Generator,
	<span>Female</span> Name Generator,
	<span>Guild</span> Name Generator,
	<span>Hipster</span> Name Generator,
	<span>Male</span> Name Generator,
	<span>Modern</span> Name Generator,
	<span>Quick</span> Name Generator,
	<span>Random</span> Name Generator,
	<span>Rapper</span> Name Generator,
	<span>Repo</span> Name Generator,
	<span>Rock Band</span> Name Generator,
	<span>Rock Star</span> Name Generator,
	<span>Shop</span> Name Generator,
	<span>Startup</span> Name Generator,
	<span>Store</span> Name Generator,
	<span>Unique</span> Name Generator,
	<span>User</span> Name Generator,
	<span>Wikipedia</span> Name Generator
</div>

<div number fade><span center></span></div>

<div result center fade="visible"></div>

<ol history center fade></ol>

<p fade></p>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.1.0/js.cookie.min.js"></script>
<script>
	
	if (typeof String.prototype.capitalize != 'function') {
		String.prototype.capitalize = function() {
			return this.replace(/\w\S*/g, function(txt){return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();});
		}
	}
	
	if (typeof String.prototype.alphaNumeric != 'function') {
		String.prototype.alphaNumeric = function() {
			return this.replace(/[^a-z0-9]/gi, '');
		}
	}
	
	$(function() {
		
		var $about = $('[about]');
		var $p = $('p');
		var $select = $([
			'<select language>',
				'<option value="ar">العربية</option>',
				'<option value="az">Azərbaycanca</option>',
				'<option value="bg">Български</option>',
				'<option value="nan">Bân-lâm-gú / Hō-ló-oē</option>',
				'<option value="be">Беларуская (Акадэмічная)</option>',
				'<option value="ca">Català</option>',
				'<option value="cs">Čeština</option>',
				'<option value="da">Dansk</option>',
				'<option value="de">Deutsch</option>',
				'<option value="et">Eesti</option>',
				'<option value="el">Ελληνικά</option>',
				'<option value="en" selected=selected>English</option>',
				'<option value="es">Español</option>',
				'<option value="eo">Esperanto</option>',
				'<option value="eu">Euskara</option>',
				'<option value="fa">فارسی</option>',
				'<option value="fr">Français</option>',
				'<option value="gl">Galego</option>',
				'<option value="ko">한국어</option>',
				'<option value="hy">Հայերեն</option>',
				'<option value="hi">हिन्दी</option>',
				'<option value="hr">Hrvatski</option>',
				'<option value="id">Bahasa Indonesia</option>',
				'<option value="it">Italiano</option>',
				'<option value="he">עברית</option>',
				'<option value="ka">ქართული</option>',
				'<option value="la">Latina</option>',
				'<option value="lt">Lietuvių</option>',
				'<option value="hu">Magyar</option>',
				'<option value="ms">Bahasa Melayu</option>',
				'<option value="min">Bahaso Minangkabau</option>',
				'<option value="nl">Nederlands</option>',
				'<option value="ja">日本語</option>',
				'<option value="no">Norsk (Bokmål)</option>',
				'<option value="nn">Norsk (Nynorsk)</option>',
				'<option value="ce">Нохчийн</option>',
				'<option value="uz">Oʻzbekcha / Ўзбекча</option>',
				'<option value="pl">Polski</option>',
				'<option value="pt">Português</option>',
				'<option value="kk">Қазақша / Qazaqşa / قازاقشا</option>',
				'<option value="ro">Română</option>',
				'<option value="ru">Русский</option>',
				'<option value="simple">Simple English</option>',
				'<option value="ceb">Sinugboanong Binisaya</option>',
				'<option value="sk">Slovenčina</option>',
				'<option value="sl">Slovenščina</option>',
				'<option value="sr">Српски / Srpski</option>',
				'<option value="sh">Srpskohrvatski / Српскохрватски</option>',
				'<option value="fi">Suomi</option>',
				'<option value="sv">Svenska</option>',
				'<option value="th">ภาษาไทย</option>',
				'<option value="tr">Türkçe</option>',
				'<option value="uk">Українська</option>',
				'<option value="ur">اردو</option>',
				'<option value="vi">Tiếng Việt</option>',
				'<option value="vo">Volapük</option>',
				'<option value="war">Winaray</option>',
				'<option value="zh">中文</option>',
			'</select>'
		].join(''));
		var html = [
			'<b><span>Random</span> Name Generator!</b>',
			'<br>\n',
			'Type a number between 1 and 5 …',
			'<br>\n',
			'type “h” for a brief history.'
		].join('');
		
		$p
			.appendTo('body')
			.html(html)
			.find('span')
			.text($('span:nth-child(' + Math.floor((Math.random() * $about.children('span').length) + 1 ) + ')', $about).text());
			
		$select.appendTo($p);
		
		$(window).load(function() {
			
			$p.attr('fade', 'visible');
			
		});
		
	});
	
	$(function() {
		
		'use strict';
		
		var $history = $('[history]');
		var $number = $('[number]');
		var $value = $number.children('span');
		var $result = $('[result]');
		var total;
		var timer;
		var pages = [];
		var flag = 0;
		var name = 'mashup';
		var lang = 'en'; // Defaults to English.
		
		var number = function() {
			
			clearTimeout(timer);
			
			$number.attr('fade', 'visible');
			
			timer = setTimeout(function() {
				
				$number.attr('fade', '');
				
			}, 1000);
			
		};
		
		var wiki = function() {
			
			$.getJSON('https://' + lang + '.wikipedia.org/w/api.php?format=json&action=query&generator=random&grnnamespace=0&grnlimit=' + total + '&callback=?', function(data) {
				
				var cookie = { history: [] };
				var temp = [];
				var domain = '';
				
				$.each(data.query.pages, function(key, page) {
					
					var title = page.title.capitalize();
					var word;
					var uri = 'http://' + lang + '.wikipedia.org/?curid=';
					var find = ['(', ')', '-', ',', '.', '"', 'Disambiguation', ':', '–', '&'];
					var i;
					var l;
					
					for (i = 0, l = find.length; i < l; i++) {
						
						title = title.replace(find[i], '');
						
					}
					
					title = title
						// Opening singles:
						.replace(/(^|[-\u2014\s(\["])'/g, '$1\u2018')
						// Closing singles & apostrophes:
						.replace(/'/g, '\u2019');
					
					title = title.split(' ');
					word = title[Math.floor(Math.random() * title.length)]
					uri += page.pageid;
					
					temp.push({
						'word': word,
						'uri': uri
					});
					
					$result
						.append(
							'<a href="' + uri + '" target="_blank">'
							+
							word
							+
							'</a>\n'
						);
					
					domain += word;
					
				});
				
				domain = domain.toLowerCase().alphaNumeric() + '.com';
				
				if (domain.length > 4) {
					
					$result.append('<a whois href="https://whois.icann.org/en/lookup?name=' + domain + '" target="_blank">' + domain + '</a>');
					
				}
				
				if (Cookies.get(name)) {
					
					cookie = Cookies.getJSON(name);
					
				}
				
				// No bigger than 10 past history:
				if (cookie.history.length >= 10) {
					
					cookie.history.pop();
					
				}
				
				cookie.history.unshift({
					entry: temp
				});
				
				Cookies.set(name, cookie, {
					 expires: 365,
					 path: ''
				});
				
				fade($result, 'visible');
				
			});
		};
		
		var history = function() {
			
			var cookie = { history: [] };
			var item;
			
			$history.html('');
			
			if (Cookies.get(name)) {
				
				cookie = Cookies.getJSON(name);
				
			}
			
			$.each(cookie.history, function(key1, value1) {
				
				$.each(value1, function(key2, value2) {
					
					item = $('<li />');
					
					$.each(value2, function(key3, value3) {
						
						item.append('<a href="' + value3.uri + '" target="_blank">' + value3.word + '</a> ');
						
					});
					
					$history.append(item);
					
				});
				
			});
			
			fade($history, 'visible');
			
		};
		
		var fade = function($el, value, callback) {
			
			callback = (callback || $.noop);
			value = (value || '');
			
			if (
				((value == '') && ($el.css('opacity') == 0))
				||
				((value == 'visible') && ($el.css('opacity') > 0))
			) {
				
				callback.call();
				
				flag = 0;
				
			} else {
				
				$el
					.one('transitionend', function(event) {
						
						if ( ! value) {
							
							$el.html('');
							
						}
						
						callback.call();
						
						flag = 0;
						
					})
					.attr('fade', value);
				
			}
			
		};
		
		$(window).on('keypress', function(event) {
			
			var code = String.fromCharCode(event.charCode || event.keyCode);;
			var temp;
			
			if ( ! flag) {
				
				if (code.toUpperCase() == 'H') {
					
					$value.text('h');
					
					number();
					
					fade($result)
					
					history();
					
				} else {
					
					temp = code.replace(/[^1-5\.]/g, '');
					
					if (temp) {
						
						pages = [];
						
						total = ((temp) ? temp : total);
						
						$value.text(total);
						
						number();
						
						fade($history);
						
						fade($result, '', function() {
							
							wiki();
							
						});
						
						flag = 1;
						
					}
					
				}
				
			}
			
		});
		
		$('[language]').change(function() {
			
			var $this = $(this);
			
			lang = $this.val();
			
			$this.blur(); // Does not seem to work (and not time to fix). :(
			
		});
		
	});
	
</script>
</body>
</html>
